ace.define("ace/mode/c8i_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,o=function(){var e=this.createKeywordMapper({keyword:"else|fn|if|while|or|and|var","constant.library":"KEY|RAND|DRAW","constant.language":"true|false|","variable.language":"I|ST|DT"},"identifier");this.$rules={start:[{stateName:"bracketedComment",onMatch:function(e,t,n){return n.unshift(this.next,e.length-2,t),"comment"},regex:/\-\-\[=*\[/,next:[{onMatch:function(e,t,n){return e.length==n[1]?(n.shift(),n.shift(),this.next=n.shift()):this.next="","comment"},regex:/\]=*\]/,next:"start"},{defaultToken:"comment"}]},{token:"comment",regex:"\\-\\-.*$"},{stateName:"bracketedString",onMatch:function(e,t,n){return n.unshift(this.next,e.length,t),"string.start"},regex:/\[=*\[/,next:[{onMatch:function(e,t,n){return e.length==n[1]?(n.shift(),n.shift(),this.next=n.shift()):this.next="","string.end"},regex:/\]=*\]/,next:"start"},{defaultToken:"string"}]},{token:"string",regex:'"(?:[^\\\\]|\\\\.)*?"'},{token:"string",regex:"'(?:[^\\\\]|\\\\.)*?'"},{token:"constant.numeric",regex:"(?:(?:(?:(?:\\d+)?(?:\\.\\d+))|(?:(?:\\d+)\\.)))"},{token:"constant.numeric",regex:"(?:(?:(?:[1-9]\\d*)|(?:0))|(?:0[xX][\\dA-Fa-f]+))\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\/|%|\\#|\\^|~|<|>|<=|=>|==|~=|=|\\:|\\.\\.\\.|\\.\\."},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:"text",regex:"\\s+|\\w+"}]},this.normalizeRules()};i.inherits(o,r),t.c8iHighlightRules=o})),ace.define("ace/mode/folding/c8i",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range","ace/token_iterator"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("./fold_mode").FoldMode,o=e("../../range").Range,a=e("../../token_iterator").TokenIterator,s=t.FoldMode=function(){};i.inherits(s,r),function(){this.foldingStartMarker=/\b(function|then|do|repeat)\b|{\s*$|(\[=*\[)/,this.foldingStopMarker=/\bend\b|^\s*}|\]=*\]/,this.getFoldWidget=function(e,t,n){var i=e.getLine(n),r=this.foldingStartMarker.test(i),o=this.foldingStopMarker.test(i);if(r&&!o){var a;if("then"==(a=i.match(this.foldingStartMarker))[1]&&/\belseif\b/.test(i))return;if(a[1]){if("keyword"===e.getTokenAt(n,a.index+1).type)return"start"}else{if(!a[2])return"start";if("bracketedComment"==(s=e.bgTokenizer.getState(n)||"")[0]||"bracketedString"==s[0])return"start"}}if("markbeginend"!=t||!o||r&&o)return"";if("end"===(a=i.match(this.foldingStopMarker))[0]){if("keyword"===e.getTokenAt(n,a.index+1).type)return"end"}else{if("]"!==a[0][0])return"end";var s;if("bracketedComment"==(s=e.bgTokenizer.getState(n-1)||"")[0]||"bracketedString"==s[0])return"end"}},this.getFoldWidgetRange=function(e,t,n){var i,r=e.doc.getLine(n);return(i=this.foldingStartMarker.exec(r))?i[1]?this.c8iBlock(e,n,i.index+1):i[2]?e.getCommentFoldRange(n,i.index+1):this.openingBracketBlock(e,"{",n,i.index):(i=this.foldingStopMarker.exec(r))?"end"===i[0]&&"keyword"===e.getTokenAt(n,i.index+1).type?this.c8iBlock(e,n,i.index+1):"]"===i[0][0]?e.getCommentFoldRange(n,i.index+1):this.closingBracketBlock(e,"}",n,i.index+i[0].length):void 0},this.c8iBlock=function(e,t,n,i){var r=new a(e,t,n),s={function:1,do:1,then:1,elseif:-1,end:-1,repeat:1,until:-1},l=r.getCurrentToken();if(l&&"keyword"==l.type){var c=l.value,g=[c],u=s[c];if(u){var h=-1===u?r.getCurrentTokenColumn():e.getLine(t).length,d=t;for(r.step=-1===u?r.stepBackward:r.stepForward;l=r.step();)if("keyword"===l.type){var f=u*s[l.value];if(f>0)g.unshift(l.value);else if(f<=0){if(g.shift(),!g.length&&"elseif"!=l.value)break;0===f&&g.unshift(l.value)}}return l?i?r.getCurrentTokenRange():(t=r.getCurrentTokenRow(),-1===u?new o(t,e.getLine(t).length,d,h):new o(d,h,t,r.getCurrentTokenColumn())):null}}}}.call(s.prototype)})),ace.define("ace/mode/c8i",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/c8i_highlight_rules","ace/mode/folding/c8i","ace/range","ace/worker/worker_client"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text").Mode,o=e("./c8i_highlight_rules").c8iHighlightRules,a=e("./folding/c8i").FoldMode,s=e("../range").Range,l=e("../worker/worker_client").WorkerClient,c=function(){this.HighlightRules=o,this.foldingRules=new a,this.$behaviour=this.$defaultBehaviour};i.inherits(c,r),function(){this.lineCommentStart="--",this.blockComment={start:"--[",end:"]--"};var e={function:1,then:1,do:1,else:1,elseif:1,repeat:1,end:-1,until:-1},t=["else","elseif","end","until"];this.getNextLineIndent=function(t,n,i){var r=this.$getIndent(n),o=0,a=this.getTokenizer().getLineTokens(n,t).tokens;return"start"==t&&(o=function(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];"keyword"==r.type?r.value in e&&(n+=e[r.value]):"paren.lparen"==r.type?n+=r.value.length:"paren.rparen"==r.type&&(n-=r.value.length)}return n<0?-1:n>0?1:0}(a)),o>0?r+i:o<0&&r.substr(r.length-i.length)==i&&!this.checkOutdent(t,n,"\n")?r.substr(0,r.length-i.length):r},this.checkOutdent=function(e,n,i){if("\n"!=i&&"\r"!=i&&"\r\n"!=i)return!1;if(n.match(/^\s*[\)\}\]]$/))return!0;var r=this.getTokenizer().getLineTokens(n.trim(),e).tokens;return!(!r||!r.length)&&"keyword"==r[0].type&&-1!=t.indexOf(r[0].value)},this.getMatching=function(t,n,i){if(null==n){var r=t.selection.lead;i=r.column,n=r.row}var o=t.getTokenAt(n,i);if(o&&o.value in e)return this.foldingRules.c8iBlock(t,n,i,!0)},this.autoOutdent=function(e,t,n){var i=t.getLine(n).match(/^\s*/)[0].length;if(i&&n){var r=this.getMatching(t,n,i+1);if(r&&r.start.row!=n){var o=this.$getIndent(t.getLine(r.start.row));o.length!=i&&(t.replace(new s(n,0,n,i),o),t.outdentRows(new s(n+1,0,n+1,0)))}}},this.createWorker=function(e){var t=new l(["ace"],"ace/mode/c8i_worker","Worker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/c8i",this.snippetFileId="ace/snippets/c8i"}.call(c.prototype),t.Mode=c})),ace.require(["ace/mode/c8i"],(function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}));